# 虚拟机栈

​	虚拟机栈里有一个东西叫栈帧，栈帧里有三个东西。

​	一个叫局部变量表，局部变量表是用于存储方法中的局部变量和方法参数等临时数据。

​	一个是操作数栈，操作数栈跟局部变量表的存储方式本质无太大区别，但是访问方式却有着很大差异，操作数栈是通过标准的入栈出栈执行一次数据访问。

​	最后一个是用来指向方法区或常量池的指针。

​	这三个东西统一在栈帧里，而栈帧又包含在虚拟机栈里。



​	栈里我需要调用一个方法时，需要先生成一个栈帧，而栈帧里我还需要一个局部变量表，局部变量表用来保存临时数据，除此之外我们还需要一个栈叫做操作数栈，操作数栈是先进后出。还有一个又来指向常量池的指针。

​	下面我们来写一个程序

```java
		public class demo{
		public static void main(String[] args){
			int a = 1;
			int b = 1;
			int c = a+b;		
		}
	}
```

​	编译后的字节码

![Snipaste_2021-03-09_13-30-07](../../java/%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA/java.assets/Snipaste_2021-03-09_13-30-07.png)

​	我们先来看第一行的iconst_1，i表示的是常量 ，iconst_1表示操作数栈入栈了一个1。第二行的istore_1表示从操作数栈拿出，放到局部变量表里。第三行第四行也是如此，到第四行为止，现在局部变量表里有两个1在里面。那么下面iload_1和iload_2表示从局部变量表里把两个变量拿出，放回操作数栈，然后iadd 表示把两个量提出，从而相加，然后isoree_3在放回局部变量表中，最后return。

# 